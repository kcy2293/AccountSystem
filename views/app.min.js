"use strict";function SidenavController(e,t){function n(e){i.selected=e,t.path(e.route)}function o(){e("left").toggle()}var i=this;i.menus=[{name:"로그인",route:"/login"},{name:"전체 예약서 목록",route:"/reservation/"},{name:"이번주 예약서 목록",route:"/reserv-week-list/"},{name:"예약서 입력",route:"/reserv-create/"},{name:"예약서 항목 설정",route:"/setting/1/"},{name:"패키지 메뉴 설정",route:"/setting/2/"},{name:"정산서 작성",route:"/account/"}],i.selected=i.menus[3],i.selectMenu=n,i.toggleSidenav=o}angular.module("myApp",["ngRoute","ngMaterial","ngMessages","mdPickers","settingItem","settingMenuTable","settingPay","reserv-create","reserv-list","reserv-week-list","reserv-view","reserv-update","account-create","login"]),function(){angular.module("myApp").factory("moment",["$window",function(e){return e.moment}]),angular.module("myApp").factory("AuthenticationFactory",["$window",function(e){var t={isLogged:!1,check:function(){e.sessionStorage.token&&e.sessionStorage.user?this.isLogged=!0:(this.isLogged=!1,delete this.user)}};return t}]),angular.module("myApp").factory("UserAuthFactory",["$window","$location","$http","AuthenticationFactory",function(e,t,n,o){return{login:function(e,t){return n.post("/auth/login",{email:e,password:t})},logout:function(){o.isLogged&&(o.isLogged=!1,delete o.user,delete o.role,delete e.sessionStorage.token,delete e.sessionStorage.user,delete e.sessionStorage.role,t.path("/login"))}}}]),angular.module("myApp").factory("TokenInterceptor",["$q","$window",function(e,t){return{request:function(n){return n.headers=n.headers||{},t.sessionStorage.token&&(n.headers["X-Access-Token"]=t.sessionStorage.token,n.headers["X-Key"]=t.sessionStorage.user,n.headers["Content-Type"]="application/json"),n||e.when(n)},response:function(t){return t||e.when(t)}}}])}(),angular.module("myApp").controller("SidenavController",["$mdSidenav","$location",SidenavController]),function(){function e(){var e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);var o=e.getDay(),i=0==o?7:o,a=t(e,i),c=a.getFullYear(),r=n(a.getMonth()+1),s="";return s+=c,s+=r,s+=n(a.getDate()),{year:c,month:r,date:s}}function t(e,t){return new Date(e.getTime()-24*t*60*60*1e3)}function n(e){return e<10?"0"+String(e):String(e)}angular.module("myApp").config(["$locationProvider","$routeProvider","$httpProvider",function(t,n,o){o.interceptors.push("TokenInterceptor");var i=(new Date).getFullYear(),a=e();n.when("/login",{template:"<login></login>",access:{requiredLogin:!1}}).when("/setting/1/",{template:"<setting-item></setting-item>",access:{requiredLogin:!0}}).when("/setting/2/",{template:"<setting-menutable></setting-menutable>",access:{requiredLogin:!0}}).when("/setting/3/",{template:"<setting-pay></setting-pay>",access:{requiredLogin:!0}}).when("/reservation/",{redirectTo:"/reservation/"+i,access:{requiredLogin:!0}}).when("/reservation/:year",{template:"<reserv-list></reserv-list>",access:{requiredLogin:!0}}).when("/reservation/:year/:id",{template:"<reserv-view></reserv-view>",access:{requiredLogin:!0}}).when("/reserv-week-list/",{redirectTo:"/reserv-week-list/"+i,access:{requiredLogin:!0}}).when("/reserv-week-list/:year",{template:"<reserv-week-list></reserv-week-list>",access:{requiredLogin:!0}}).when("/reserv-create/",{template:"<reserv-create></reserv-create>",access:{requiredLogin:!0}}).when("/reserv-update/:year/:id",{template:"<reserv-update></reserv-update>",access:{requiredLogin:!0}}).when("/account/",{redirectTo:"/account/"+a.year+"/"+a.month+"/"+a.date,access:{requiredLogin:!0}}).when("/account/:year",{}).when("/account/:year/:month",{}).when("/account/:year/:month/:date",{template:"<account-create></account-create>",access:{requiredLogin:!0}}).otherwise("/reserv-create/")}]),angular.module("myApp").run(["$rootScope","$window","$location","AuthenticationFactory",function(e,t,n,o){o.check(),e.$on("$routeChangeStart",function(e,i,a){i.access&&i.access.requiredLogin&&!o.isLogged?n.path("/login"):(o.user||(o.user=t.sessionStorage.user),o.role||(o.role=t.sessionStorage.role))}),e.$on("$routeChangeSuccess",function(t,i,a){e.showMenu=o.isLogged,e.role=o.role,1==o.isLogged&&"/login"==n.path()&&n.path("/")})}])}(),function(){angular.module("account-create",[])}(),function(){angular.module("login",[])}(),function(){angular.module("reserv-create",[])}(),function(){angular.module("reserv-list",[])}(),function(){angular.module("reserv-update",[])}(),function(){angular.module("reserv-view",[])}(),function(){angular.module("reserv-week-list",[])}(),function(){angular.module("settingMenuTable",[])}(),function(){angular.module("settingPay",[])}(),function(){angular.module("settingItem",[])}(),function(){angular.module("decoFruit",[])}(),function(){angular.module("decoLoc",[])}(),function(){angular.module("decoName",[])}(),function(){angular.module("decoPhoto",[])}(),function(){angular.module("decoRcake",[])}(),function(){angular.module("decoType",[])}(),function(){angular.module("optDiscount",[])}(),function(){angular.module("optDress",[])}(),function(){angular.module("optMC",[])}(),function(){angular.module("optMovie",[])}(),function(){angular.module("optOther",[])}(),function(){angular.module("optSnap",[])}(),function(){function e(e,t,n,o,i){function a(){var e=new i(P).subtract(7,"days").format("YYYYMMDD");n.url("/account/"+O+"/"+T+"/"+e)}function c(){var e=new i(P).add(7,"days").format("YYYYMMDD");n.url("/account/"+O+"/"+T+"/"+e)}function r(){y.tabList.length<1&&o.showSimple("입력된 예약서가 없습니다."),y.account.revenueList=[],y.account.incomeList=[],y.account.expenseList=[],y.account.revenueTotal=0,y.account.incomeTotal=0,y.account.expenseTotal=0;for(var e,t=0,n=y.tabList.length;t<n;t++){e=y.tabList[t].priceList;for(var i=0,a=e.length;i<a;i++)e[i].hasOwnProperty("sell")&&s(e[i]),e[i].hasOwnProperty("fee")&&l(e[i])}u(),p()}function s(e){if("revenue"===e.group)return void(y.account.revenueTotal+=Number(e.sell));var t=_.findIndex(y.account.revenueList,{group:e.group});if(t<0)0!==Number(e.sell)&&y.account.revenueList.push({group:e.group,groupName:x[e.group]||"지정안됨",itemList:[{name:e.item,price:Number(e.sell)}],totalPrice:Number(e.sell)});else{var n=y.account.revenueList[t].itemList,o=_.findIndex(n,{name:e.item});o<0?0!==Number(e.sell)&&n.push({name:e.item,price:Number(e.sell)}):(n[o].price=n[o].price+e.sell,n[o].price=Number(n[o].price.toFixed(3))),y.account.revenueList[t].totalPrice+=e.sell,y.account.revenueList[t].totalPrice=Number(y.account.revenueList[t].totalPrice.toFixed(3))}}function l(e){if("expense"===e.group)return void(y.account.expenseTotal+=Number(e.fee));var t=_.findIndex(y.account.expenseList,{group:e.group});if(t<0){if(0!==Number(e.fee)){var n=_.contains(["decoLoc","optMC","optMovie","pay"],e.group);y.account.expenseList.push({group:e.group,groupName:N[e.group]||"지정안됨",itemList:[{name:e.item,price:Number(e.fee)}],totalPrice:Number(e.fee),detailPrint:n})}}else{var o=y.account.expenseList[t].itemList,i=_.findIndex(o,{name:e.item});i<0?0!==Number(e.fee)&&o.push({name:e.item,price:Number(e.fee)}):(o[i].price=o[i].price+e.fee,o[i].price=Number(o[i].price.toFixed(3))),y.account.expenseList[t].totalPrice+=e.fee,y.account.expenseList[t].totalPrice=Number(y.account.expenseList[t].totalPrice.toFixed(3))}}function u(){y.account.incomeTotal=y.account.revenueTotal-y.account.expenseTotal,y.account.incomeList=JSON.parse(JSON.stringify(y.account.revenueList));for(var e=0,t=y.account.incomeList.length;e<t;e++)y.account.incomeList[e].groupName=M[y.account.incomeList[e].group]||"지정안됨";for(var e=0,t=y.account.expenseList.length;e<t;e++){var n=y.account.expenseList[e],o=_.findIndex(y.account.revenueList,{group:n.group});if(o<0)y.account.incomeList.push({group:n.group,groupName:M[n.group]||"지정안됨",itemList:n.itemList,totalPrice:n.totalPrice*-1});else{y.account.incomeList[o].groupName=M[n.group];for(var i=y.account.incomeList[o].itemList,a=0,c=n.itemList.length;a<c;a++){var r=_.findIndex(i,{name:n.itemList[a].name});r<0?i.push(n.itemList[a]):(i[r].price=i[r].price-n.itemList[a].price,i[r].price=Number(i[r].price.toFixed(3))),y.account.incomeList[o].totalPrice-=n.itemList[a].price,y.account.incomeList[o].totalPrice=Number(y.account.incomeList[o].totalPrice.toFixed(3))}}}}function p(){for(var e=0,t=y.account.addedExpenseList.length;e<t;e++){var n=y.account.addedExpenseList[e];d(n),m(n)}}function d(e){var t=_.findIndex(y.account.expenseList,{group:e.group});if(t<0)y.account.expenseList.push({group:e.group,groupName:N[e.group]||"지정안됨",itemList:[{name:e.itemName,price:e.itemPrice}],totalPrice:e.itemPrice,detailPrint:!0}),y.account.expenseTotal+=e.itemPrice,y.account.expenseTotal=Number(y.account.expenseTotal.toFixed(3));else{var n=y.account.expenseList[t].itemList,o=_.findIndex(n,{name:e.itemName});if(o<0)0!==e.itemPrice&&(n.push({name:e.itemName,price:e.itemPrice}),y.account.expenseList[t].totalPrice+=e.itemPrice,y.account.expenseList[t].totalPrice=Number(y.account.expenseList[t].totalPrice.toFixed(3)),y.account.expenseTotal+=e.itemPrice,y.account.expenseTotal=Number(y.account.expenseTotal.toFixed(3)));else{var i=e.itemPrice-n[o].price;n[o].price=e.itemPrice,y.account.expenseList[t].totalPrice+=i,y.account.expenseList[t].totalPrice=Number(y.account.expenseList[t].totalPrice.toFixed(3)),y.account.expenseTotal+=i,y.account.expenseTotal=Number(y.account.expenseTotal.toFixed(3))}}}function m(e){var t=_.findIndex(y.account.incomeList,{group:e.group});if(t<0)y.account.incomeList.push({group:e.group,groupName:M[e.group]||"지정안됨",itemList:[{name:e.itemName,price:e.itemPrice*-1}],totalPrice:e.itemPrice*-1,detailPrint:!0}),y.account.incomeTotal-=e.itemPrice,y.account.incomeTotal=Number(y.account.incomeTotal.toFixed(3));else{var n=y.account.incomeList[t].itemList,o=_.findIndex(n,{name:e.itemName});if(o<0)0!==e.itemPrice&&(n.push({name:e.itemName,price:e.itemPrice*-1}),y.account.incomeList[t].totalPrice-=e.itemPrice,y.account.incomeList[t].totalPrice=Number(y.account.incomeList[t].totalPrice.toFixed(3)),y.account.incomeTotal-=e.itemPrice,y.account.incomeTotal=Number(y.account.incomeTotal.toFixed(3)));else{var i=e.itemPrice*-1-n[o].price;n[o].price=e.itemPrice*-1,y.account.incomeList[t].totalPrice+=i,y.account.incomeList[t].totalPrice=Number(y.account.incomeList[t].totalPrice.toFixed(3)),y.account.incomeTotal+=i,y.account.incomeTotal=Number(y.account.incomeTotal.toFixed(3))}}}function g(e){var t=_.findIndex(y.account.expenseList,{group:e.group});if(t<0)return void console.log(e.group+" 이 리스트에 존재하지 않습니다.");var n=y.account.expenseList[t].itemList,o=_.findIndex(n,{name:e.itemName});if(o<0)return void console.log(e.itemName+" 이 리스트에 존재하지 않습니다.");var i=n.splice(o,1);if(y.account.expenseList[t].totalPrice-=i[0].price,y.account.expenseList[t].totalPrice=Number(y.account.expenseList[t].totalPrice.toFixed(3)),y.account.expenseTotal-=i[0].price,y.account.expenseTotal=Number(y.account.expenseTotal.toFixed(3)),0==n.length&&y.account.expenseList.splice(t,1),t=_.findIndex(y.account.incomeList,{group:e.group}),t<0)return void console.log(e.group+" 이 그룹에 존재하지 않습니다.");var n=y.account.incomeList[t].itemList,o=_.findIndex(n,{name:e.itemName});if(o<0)return void console.log(e.itemName+" 이 리스트에 존재하지 않습니다.");var e=n.splice(o,1);y.account.incomeList[t].totalPrice-=e[0].price,y.account.incomeList[t].totalPrice=Number(y.account.incomeList[t].totalPrice.toFixed(3)),y.account.incomeTotal-=e[0].price,y.account.incomeTotal=Number(y.account.incomeTotal.toFixed(3)),0==n.length&&y.account.incomeList.splice(t,1)}function f(){var e=_.findIndex(y.account.addedExpenseList,{itemName:y.addItem});if(e<0){var t={group:"addExpense",itemName:y.addItem,itemPrice:Number(y.addPrice)};y.account.addedExpenseList.push(t),d(t),m(t)}else{var t=y.account.addedExpenseList[e];t.itemName=y.addItem,t.itemPrice=y.addPrice,d(t),m(t)}y.addItem=void 0,y.addPrice=void 0}function h(e){y.updateIndex=e,y.addItem=y.account.addedExpenseList[e].itemName,y.addPrice=y.account.addedExpenseList[e].itemPrice}function v(){var e={group:"addExpense",itemName:y.addItem,itemPrice:Number(y.addPrice)};y.account.addedExpenseList[y.updateIndex]=e,d(e),m(e),y.addItem=void 0,y.addPrice=void 0,y.updateIndex=-1}function $(e){var t=y.account.addedExpenseList.splice(e,1);g(t[0])}function L(){y.account.hasOwnProperty("expenseList")?(y.account.accountDate=b.toDate(),y.account.dateStr=P,t.post("/api/account/"+O+"/"+T+"/"+P+"/",y.account).then(function(e){200==e.status&&o.showSimple("정산서가 저장되었습니다.")})):o.showSimple("저장할 내용이 없습니다.")}var y=this;y.account={};var D=n.path().split("/"),O=D[D.length-3],T=D[D.length-2],P=D[D.length-1],b=new i(P),C=new i(P).subtract(6,"days").set("hour",0).set("minute",0),I=new i(P).add(1,"days").set("hour",0).set("minute",0);t.get("/api/account/"+O+"/"+T+"/"+P).then(function(e){e.data.length>0&&(y.account=e.data[0])});var w;t.get("/api/setting/").then(function(e){w=e.data});var k={params:{from:C.toISOString(),to:I.toISOString()},headers:{Accept:"application/json"}};t.get("/api/reservation/",k).then(function(e){y.tabList=e.data;for(var t=0,n=y.tabList.length;t<n;t++)y.tabList[t].docoDate=new Date(y.tabList[t].decoDate),y.tabList[t].day=i(y.tabList[t].decoDate).format("M/D(dd)")}),y.account.period=C.format("M/D(dd)")+" ~ "+b.format("M/D(dd)"),y.account.addedExpenseList=[],y.updateIndex=-1,y.changePrevDate=a,y.changeNextDate=c,y.calc=r,y.addExpenseItem=f,y.clickedUpdate=h,y.updateExpenseItem=v,y.deleteExpenseItem=$,y.save=L;var x={decoLoc:"전속할인",decoType:"돌상",decoFruit:"생과일",decoRcake:"떡케익",decoPhoto:"포토테이블",optDress:"돌복/드레스",optMC:"MC사회",optMovie:"성장동영상",optOther:"기타",optOutgoingFee:"출장비"},M={decoType:"돌상수익",decoLoc:"전속수익",decoFruit:"생과일수익",decoRcake:"떡케익수익",decoPhoto:"포토테이블수익",optDress:"돌복/드레스수익",optMC:"MC수익",optMovie:"동영상수익",optOther:"기타수익",optOutgoingFee:"출장비수익",addExpense:"사업외지출",pay:"페이"},N={decoLoc:"전속커미션",decoType:"소품수리비",decoFruit:"생과일",decoRcake:"떡케익",decoPhoto:"포토수리비",optDress:"돌복수선비",optMC:"MC커미션",optMovie:"성장동영상",optOther:"기타지출",addExpense:"사업외지출",pay:"페이"}}e.$inject=["$scope","$http","$location","$mdToast","moment"],angular.module("account-create",[]).component("accountCreate",{templateUrl:"app/account/account-create.template.html",controller:e})}(),function(){function e(e,t,n,o,i){function a(){var e=c.user.email,a=c.user.password;void 0!==e&&void 0!=a?o.login(e,a).success(function(e){console.log(e),i.isLogged=!0,i.user=e.user.email,i.role=e.user.role,n.sessionStorage.token=e.token,n.sessionStorage.user=e.user.email,n.sessionStorage.role=e.user.role,t.path("/")}).error(function(e){alert(e.message)}):alert("이메일과 비밀번호를 입력해주세요")}var c=this;c.user={},c.doLogin=a}e.$inject=["$scope","$location","$window","UserAuthFactory","AuthenticationFactory"],angular.module("login",[]).component("login",{templateUrl:"app/auth/login.template.html",controller:e})}(),function(){function e(e,t,n){function o(){C.reserv={deposit:5,balance:0}}function i(){"파티리움"==C.reserv.company?C.reserv.deposit=10:C.reserv.deposit=5,T()}function a(){var e=_.findWhere(C.settings.menuTable,{name:C.reserv.menuTable});C.reserv.decoType=e.decoType,C.reserv.decoFruit=[e.decoFruit],C.reserv.decoRcake=e.decoRcake.split(","),C.reserv.optDiscount=e.optDiscount.split(","),T()}function c(){var e=_.findWhere(C.settings.decoName,{name:C.reserv.decoName});e.imgName&&(C.reserv.decoImage=e.imgName)}function r(){T()}function s(){T()}function l(){T()}function u(){T()}function p(){T()}function d(){T()}function m(){T()}function g(){T()}function f(){T()}function h(){T()}function v(){T()}function $(){T()}function L(){T()}function y(){T()}function D(){T()}function O(){T()}function T(){C.reserv.priceList=[];var e,t,n,o,i=0,a=0;if(t=C.reserv.decoType,t&&(e="decoType",n=P(e,t,"sell"),o=P(e,t,"repair"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o),t=C.reserv.decoFruit,t&&(e="decoFruit",t.forEach(function(t){n=P(e,t,"sell"),o=P(e,t,"buy"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.decoRcake,t&&(e="decoRcake",t.forEach(function(t){n=P(e,t,"sell"),o=P(e,t,"buy"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.decoPhoto,t&&(e="decoPhoto",n=P(e,t,"sell"),o=P(e,t,"repair"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o),t=C.reserv.optDress,t&&(e="optDress",t.forEach(function(t){n=P(e,t,"sell"),o=P(e,t,"repair"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.optMC,t&&(e="optMC",t.forEach(function(t){n=P(e,t,"sell"),o=P(e,t,"commission"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.optMovie,t&&(e="optMovie",n=P(e,t,"sell"),o=P(e,t,"commission"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o),t=C.reserv.optOther,t&&(e="optOther",t.forEach(function(t){n=P(e,t,"sell"),o=P(e,t,"buy"),C.reserv.priceList.push({group:e,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.optDiscount,t&&(e="optDiscount",t.forEach(function(t){n=P(e,t,"disPrice")*-1,o=P(e,t,"repair")*-1;var c=P(e,t,"item");C.reserv.priceList.push({group:c,item:t,sell:n,fee:o}),i+=n,a+=o})),t=C.reserv.decoLoc){e="decoLoc";var c=P(e,t,"commCalcRule"),r=P(e,t,"commission");o="총판매비"==c?i*r*.01:"부가세비"==c?(i+.1*i)*r*.01:r,C.reserv.priceList.push({group:e,item:t,fee:o}),a+=o}C.reserv.optOutgoingFee&&(C.reserv.priceList.push({group:"optOutgoingFee",item:"출장비",sell:C.reserv.optOutgoingFee}),i+=C.reserv.optOutgoingFee),C.reserv.mainManagerPay&&(C.reserv.priceList.push({group:"pay",item:"페이-"+C.reserv.mainManager,fee:C.reserv.mainManagerPay}),a+=C.reserv.mainManagerPay),C.reserv.subManagerPay&&(C.reserv.priceList.push({group:"pay",item:"페이-"+C.reserv.subManager,fee:C.reserv.subManagerPay}),a+=C.reserv.subManagerPay),C.reserv.balance=0;for(var s,l=0,u=C.reserv.priceList.length;l<u;l++)s=C.reserv.priceList[l],s.hasOwnProperty("sell")&&(C.reserv.balance+=s.sell);C.reserv.balance-=C.reserv.deposit,0!=i&&(C.reserv.priceList.push({group:"revenue",item:"총판매",sell:i}),C.reserv.priceList.push({group:"expense",item:"총지출",fee:a}))}function P(e,t,n){var o=_.findWhere(C.settings[e],{name:t});return o[n]}function b(){var e=C.reserv.decoDate,i=C.reserv.decoTime;e&&i&&(e.setHours(i.getHours()),e.setMinutes(i.getMinutes())),t.post("/api/reservation/",C.reserv).then(function(e){200==e.status&&(o(),n.showSimple("예약서가 저장되었습니다."))})}var C=this;o(),t.get("/api/setting/").then(function(e){C.settings=e.data}),t.get("/api/users/").then(function(e){C.users=e.data}),C.companyChange=i,C.decoTypeChange=r,C.decoLocChange=s,C.menuTableChange=a,C.decoNameChange=c,C.decoFruitChange=l,C.decoRcakeChange=u,C.decoPhotoChange=p,C.optDressChange=d,C.optMCChange=m,C.optMovieChange=g,C.optOtherChange=f,C.optOutgoingFeeChange=v,C.optDiscountChange=h,C.depositChange=$,C.mainManagerChange=L,C.subManagerChange=y,C.mainPayChange=D,C.subPayChange=O,C.save=b,C.getJsonLen=function(e){return e?Object.items(e).length:0}}e.$inject=["$scope","$http","$mdToast"],angular.module("reserv-create",[]).component("reservCreate",{templateUrl:"app/reservation/reserv-create.template.html",controller:e})}(),function(){function e(e,t,n){var o=this,i=n.path().split("/");o.year=i[i.length-1],t.get("/api/reservation/"+o.year).then(function(e){o.list=e.data;for(var t=0,n=o.list.length;t<n;t++)o.list[t].docoDate=new Date(o.list[t].decoDate),o.list[t].day=moment(o.list[t].decoDate).format("M/DD(dd) h:mm");o.list.reverse()}),o.listClicked=function(e){n.url("/reservation/"+o.year+"/"+e)}}e.$inject=["$scope","$http","$location"],angular.module("reserv-list",[]).component("reservList",{templateUrl:"app/reservation/reserv-list.template.html",controller:e})}(),function(){function t(t,n,o,i){function a(){w.reserv={deposit:5,balance:0}}function c(){"파티리움"==w.reserv.company?w.reserv.deposit=10:w.reserv.deposit=5,b()}function r(){var e=_.findWhere(w.settings.menuTable,{name:w.reserv.menuTable});w.reserv.decoType=e.decoType,w.reserv.decoFruit=[e.decoFruit],w.reserv.decoRcake=e.decoRcake.split(","),w.reserv.optDiscount=e.optDiscount.split(","),b()}function s(){var e=_.findWhere(w.settings.decoName,{name:w.reserv.decoName});e.imgName&&(w.reserv.decoImage=e.imgName)}function l(){b()}function u(){b()}function p(){b()}function d(){b()}function m(){b()}function g(){b()}function f(){b()}function h(){b()}function v(){b()}function $(){b()}function L(){b()}function y(){b()}function D(){b()}function O(){b()}function T(){b()}function P(){b()}function b(){w.reserv.priceList=[];var t,n,o,i,a=0,c=0;if(n=w.reserv.decoType,n&&(t="decoType",o=C(t,n,"sell"),i=C(t,n,"repair"),w.reserv.priceList.push({group:t,item:n,sell:o,fee:i}),a+=o,c+=i),n=w.reserv.decoFruit,n&&(t="decoFruit",n.forEach(function(e){o=C(t,e,"sell"),i=C(t,e,"buy"),w.reserv.priceList.push({group:t,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.decoRcake,n&&(t="decoRcake",n.forEach(function(e){o=C(t,e,"sell"),i=C(t,e,"buy"),w.reserv.priceList.push({group:t,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.decoPhoto,n&&(t="decoPhoto",o=C(t,n,"sell"),i=C(t,e,"repair"),w.reserv.priceList.push({group:t,item:n,sell:o,fee:i}),a+=o,c+=i),n=w.reserv.optDress,n&&(t="optDress",n.forEach(function(e){o=C(t,e,"sell"),i=C(t,e,"repair"),w.reserv.priceList.push({group:t,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.optMC,n&&(t="optMC",n.forEach(function(e){o=C(t,e,"sell"),i=C(t,e,"commission"),w.reserv.priceList.push({group:t,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.optMovie,n&&(t="optMovie",o=C(t,n,"sell"),i=C(t,n,"commission"),w.reserv.priceList.push({group:t,item:n,sell:o,fee:i}),a+=o,c+=i),n=w.reserv.optOther,n&&(t="optOther",n.forEach(function(e){o=C(t,e,"sell"),i=C(t,e,"buy"),w.reserv.priceList.push({group:t,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.optDiscount,n&&(t="optDiscount",n.forEach(function(e){o=C(t,e,"disPrice")*-1,i=C(t,e,"repair")*-1;var n=C(t,e,"item");w.reserv.priceList.push({group:n,item:e,sell:o,fee:i}),a+=o,c+=i})),n=w.reserv.decoLoc){t="decoLoc";var r=C(t,n,"commCalcRule"),s=C(t,n,"commission");i="총판매비"==r?a*s*.01:"부가세비"==r?(a+.1*a)*s*.01:s,w.reserv.priceList.push({group:t,item:n,fee:i}),c+=i}w.reserv.optOutgoingFee&&(w.reserv.priceList.push({group:"optOutgoingFee",item:"출장비",sell:w.reserv.optOutgoingFee}),a+=w.reserv.optOutgoingFee),w.reserv.mainManagerPay&&(w.reserv.priceList.push({group:"pay",item:"페이-"+w.reserv.mainManager,fee:w.reserv.mainManagerPay}),c+=w.reserv.mainManagerPay),w.reserv.subManagerPay&&(w.reserv.priceList.push({group:"pay",item:"페이-"+w.reserv.subManager,fee:w.reserv.subManagerPay}),c+=w.reserv.subManagerPay),w.reserv.balance=0;for(var l,u=0,p=w.reserv.priceList.length;u<p;u++)l=w.reserv.priceList[u],l.hasOwnProperty("sell")&&(w.reserv.balance+=l.sell);w.reserv.balance-=w.reserv.deposit,0!=a&&(w.reserv.priceList.push({group:"revenue",item:"총판매",sell:a.toFixed(1)}),w.reserv.priceList.push({group:"expense",item:"총지출",fee:c.toFixed(1)}))}function C(e,t,n){var o=_.findWhere(w.settings[e],{name:t});return o[n]}function I(){var e=w.reserv.decoDate,t=w.reserv.decoTime;e&&t&&(e.setHours(t.getHours()),e.setMinutes(t.getMinutes())),n.put("/api/reservation/"+M+"/"+x,w.reserv).then(function(e){200==e.status&&(a(),o.showSimple("예약서가 저장되었습니다."))})}var w=this,k=i.path().split("/"),x=k[k.length-1],M=k[k.length-2];a(),n.get("/api/setting/").then(function(e){w.settings=e.data;var t=w.settings.pay;if(t){for(var o=[],i=0,a=t.length;i<a;i++)o.indexOf(t[i].role)<0&&o.push(t[i].role);w.role=o}n.get("/api/reservation/"+M+"/"+x).then(function(e){w.reserv=e.data,w.reserv.decoDate=new Date(w.reserv.decoDate),w.reserv.decoTime=new Date(w.reserv.decoTime)})}),n.get("/api/users/").then(function(e){w.users=e.data}),w.companyChange=c,w.decoTypeChange=l,w.decoLocChange=u,w.menuTableChange=r,w.decoNameChange=s,w.decoFruitChange=p,w.decoRcakeChange=d,w.decoPhotoChange=m,w.optDressChange=g,w.optMCChange=f,w.optMovieChange=h,w.optOtherChange=v,w.optOutgoingFeeChange=L,w.optDiscountChange=$,w.depositChange=y,w.mainManagerChange=D,w.subManagerChange=O,w.mainPayChange=T,w.subPayChange=P,w.save=I,w.getJsonLen=function(e){return e?Object.keys(e).length:0}}t.$inject=["$scope","$http","$mdToast","$location"],angular.module("reserv-update",[]).component("reservUpdate",{templateUrl:"app/reservation/reserv-create.template.html",controller:t})}(),function(){function e(e,t,n,o,i){function a(){n.url("/reserv-update/"+f+"/"+g)}function c(){t.delete("/api/reservation/"+f+"/"+g).then(function(e){200==e.status&&n.url("/reservation/"+f+"/")})}function r(){var e=new i;d.consultList.unshift({consultDate:e.format("YYYY.M.D.(dd)"),content:d.consultContent}),p(function(e){e?(o.showSimple("상담 내용이 추가되었습니다."),d.consultContent=""):(o.showSimple("다시한번 시도해주시기 바랍니다."),d.consultList.shift())})}function s(e){d.updateIndex=e,d.consultContent=d.consultList[e].content}function l(e){var t=d.consultList.splice(e,1);p(function(n){n?o.showSimple("상담 내용이 삭제되었습니다."):(o.showSimple("다시한번 시도해주시기 바랍니다."),d.consultList.splice(e,0,t))})}function u(){d.consultList[d.updateIndex].content=d.consultContent,p(function(e){e?(o.showSimple("상담 내용이 변경되었습니다."),d.consultContent="",d.updateIndex=void 0):o.showSimple("다시한번 시도해주시기 바랍니다.")})}function p(e){t.put("/api/reservation/"+f+"/"+g+"/consulting",d.consultList).then(function(t){e(200==t.status?!0:!1)})}var d=this,m=n.path().split("/"),g=m[m.length-1],f=m[m.length-2];t.get("api/reservation/"+f+"/"+g).then(function(e){d.reserv=e.data,d.reserv.decoDate=new Date(d.reserv.decoDate),d.reserv.day=i(d.reserv.decoDate).format("M/DD(dd) h:mm"),d.consultList=d.reserv.consultList||[]}),d.update=a,d.delete=c,d.addConsult=r,d.updateConsult=s,d.deleteConsult=l,d.clickedConsultUpdate=u}e.$inject=["$scope","$http","$location","$mdToast","moment"],angular.module("reserv-view",[]).component("reservView",{templateUrl:"app/reservation/reserv-view.template.html",controller:e})}(),function(){function e(e,t,n,o){var i=this,a=n.path().split("/");i.year=a[a.length-1];var c=(new o).set("hour",0).set("minute",0).set("second",0).set("millisecond",0),r=c.day();r=0==r?7:r;var s=new o(c).subtract(r-1,"days"),l=new o(s).add(7,"days"),u={params:{from:s.toISOString(),to:l.toISOString()},headers:{Accept:"application/json"}};t.get("/api/reservation/",u).then(function(e){i.list=e.data;for(var t=0,n=i.list.length;t<n;t++)i.list[t].docoDate=new Date(i.list[t].decoDate),i.list[t].day=o(i.list[t].decoDate).format("M/DD(dd) h:mm");i.list.reverse()}),i.listClicked=function(e){n.url("/reservation/"+i.year+"/"+e)}}e.$inject=["$scope","$http","$location","moment"],angular.module("reserv-week-list",[]).component("reservWeekList",{templateUrl:"app/reservation/reserv-week-list.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){o.get("/api/setting/menuTable").then(function(e){u.menuTable=e.data})}function r(e){i.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,locals:{settings:u.settings},templateUrl:"app/setting-menuTable/menuTable-dialog.html"}).then(function(e){e.group="menuTable",o.post("/api/setting/menuTable",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(o.delete("/api/setting/menuTable/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){i.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{settings:u.settings,params:u.selected[0]},templateUrl:"app/setting-menuTable/menuTable-dialog.html"}).then(function(e){o.put("/api/setting/menuTable/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.menuTable=[],o.get("/api/setting/").then(function(e){u.settings=e.data}),c()}function t(e,t,n){e.settings=n,e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n,o){e.settings=n,e.data=o,e.data.decoRcake&&(e.data.decoRcake=e.data.decoRcake.split(",")),e.data.optDiscount&&(e.data.optDiscount=e.data.optDiscount.split(",")),e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$http","$mdDialog","$q"],t.$inject=["$scope","$mdDialog","settings"],n.$inject=["$scope","$mdDialog","settings","params"],angular.module("settingMenuTable",["md.data.table"]).component("settingMenutable",{templateUrl:"app/setting-menuTable/setting-menuTable.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){o.get("/api/setting/pay").then(function(e){u.pay=e.data})}function r(e){i.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,locals:{ranks:u.ranks},templateUrl:"app/setting-pay/pay-dialog.html"}).then(function(e){e.group="pay",o.post("/api/setting/pay",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(o.delete("/api/setting/pay/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){i.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{ranks:u.ranks,params:u.selected[0]},templateUrl:"app/setting-pay/pay-dialog.html"}).then(function(e){o.put("/api/setting/pay/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.pay=[],o.get("/api/users/").then(function(e){for(var t=e.data,n=[],o=0,i=t.length;o<i;o++)n.indexOf(t[o].rank)<0&&n.push(t[o].rank);u.ranks=n}),c()}function t(e,t,n){e.ranks=n,e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n,o){e.ranks=n,e.data=o,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$http","$mdDialog","$q"],t.$inject=["$scope","$mdDialog","ranks"],n.$inject=["$scope","$mdDialog","ranks","params"],angular.module("settingPay",["md.data.table"]).component("settingPay",{templateUrl:"app/setting-pay/setting-pay.template.html",controller:e})}(),function(){function e(e){}e.$inject=["$scope"],angular.module("settingItem",["md.data.table","decoLoc","decoType","decoName","decoFruit","decoRcake","decoPhoto","optDress","optMC","optMovie","optSnap","optOther","optDiscount"]).component("settingItem",{templateUrl:"app/setting-item/setting-item.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoFruit").then(function(e){u.decoFruit=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoFruit/decoFruit-dialog.html"}).then(function(e){e.group="decoFruit",i.post("/api/setting/decoFruit",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoFruit/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoFruit/decoFruit-dialog.html"}).then(function(e){i.put("/api/setting/decoFruit/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.decoFruit=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){3!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoFruit",["md.data.table"]).component("decoFruit",{templateUrl:"app/setting-item/decoFruit/decoFruit.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoLoc").then(function(e){u.decoLoc=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoLoc/decoLoc-dialog.html"}).then(function(e){e.group="decoLoc",i.post("/api/setting/decoLoc",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoLoc/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoLoc/decoLoc-dialog.html"
}).then(function(e){i.put("/api/setting/decoLoc/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.DecoLoc=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoLoc",["md.data.table"]).component("decoLoc",{templateUrl:"app/setting-item/decoLoc/decoLoc.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoName").then(function(e){u.decoName=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoName/decoName-dialog.html"}).then(function(e){e.group="decoName",console.log(e),i.post("/api/setting/decoName",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoName/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoName/decoName-dialog.html"}).then(function(e){i.put("/api/setting/decoName/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.decoName=[],c()}function t(e,t,n){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){var o=new FormData;angular.forEach(e.files,function(t){o.append("files[]",t.lfFile),e.data.imgName=t.lfFileName}),e.files.length>0?n.post("/decoImage",o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(function(n){t.hide(e.data)},function(n){t.hide(e.data)}):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog","$http"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoName",["md.data.table","lfNgMdFileInput"]).component("decoName",{templateUrl:"app/setting-item/decoName/decoName.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoPhoto").then(function(e){u.decoPhoto=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoPhoto/decoPhoto-dialog.html"}).then(function(e){e.group="decoPhoto",i.post("/api/setting/decoPhoto",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoPhoto/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoPhoto/decoPhoto-dialog.html"}).then(function(e){i.put("/api/setting/decoPhoto/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.decoPhoto=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoPhoto",["md.data.table"]).component("decoPhoto",{templateUrl:"app/setting-item/decoPhoto/decoPhoto.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoRcake").then(function(e){u.decoRcake=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoRcake/decoRcake-dialog.html"}).then(function(e){e.group="decoRcake",i.post("/api/setting/decoRcake",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoRcake/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoRcake/decoRcake-dialog.html"}).then(function(e){i.put("/api/setting/decoRcake/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.decoRcake=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){3!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoRcake",["md.data.table"]).component("decoRcake",{templateUrl:"app/setting-item/decoRcake/decoRcake.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/decoType").then(function(e){u.decoType=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/decoType/decoType-dialog.html"}).then(function(e){e.group="decoType",i.post("/api/setting/decoType",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/decoType/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/decoType/decoType-dialog.html"}).then(function(e){i.put("/api/setting/decoType/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.decoType=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("decoType",["md.data.table"]).component("decoType",{templateUrl:"app/setting-item/decoType/decoType.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optDiscount").then(function(e){u.discountList=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optDiscount/optDiscount-dialog.html"}).then(function(e){e.group="optDiscount",e.repair||(e.repair=0),i.post("/api/setting/optDiscount",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optDiscount/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optDiscount/optDiscount-dialog.html"}).then(function(e){i.put("/api/setting/optDiscount/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.itemList={decoLoc:"행사장소",decoType:"장식종류",decoFruit:"생과일",decoRcake:"떡케익",optDress:"돌복/드레스",optMC:"행사사회",optMovie:"성장동영상",optOther:"기타"},u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.discountList=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optDiscount",["md.data.table"]).component("optDiscount",{templateUrl:"app/setting-item/optDiscount/optDiscount.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optDress").then(function(e){u.optDress=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optDress/optDress-dialog.html"}).then(function(e){e.group="optDress",i.post("/api/setting/optDress",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optDress/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optDress/optDress-dialog.html"}).then(function(e){i.put("/api/setting/optDress/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.optDress=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){3!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optDress",["md.data.table"]).component("optDress",{templateUrl:"app/setting-item/optDress/optDress.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optMC").then(function(e){u.optMC=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optMC/optMC-dialog.html"}).then(function(e){e.group="optMC",i.post("/api/setting/optMC",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optMC/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optMC/optMC-dialog.html"}).then(function(e){i.put("/api/setting/optMC/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.optMC=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){4!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optMC",["md.data.table"]).component("optMc",{templateUrl:"app/setting-item/optMC/optMC.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optMovie").then(function(e){u.optMovie=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optMovie/optMovie-dialog.html"}).then(function(e){e.group="optMovie",i.post("/api/setting/optMovie",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optMovie/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optMovie/optMovie-dialog.html"}).then(function(e){i.put("/api/setting/optMovie/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.optMovie=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){4!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optMovie",["md.data.table"]).component("optMovie",{templateUrl:"app/setting-item/optMovie/optMovie.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optOther").then(function(e){u.optOther=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optOther/optOther-dialog.html"}).then(function(e){e.group="optOther",i.post("/api/setting/optOther",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optOther/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optOther/optOther-dialog.html"}).then(function(e){i.put("/api/setting/optOther/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.optOther=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){3!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optOther",["md.data.table"]).component("optOther",{templateUrl:"app/setting-item/optOther/optOther.template.html",controller:e})}(),function(){function e(e,o,i,a){function c(){i.get("/api/setting/optSnap").then(function(e){u.optSnap=e.data})}function r(e){o.show({clickOutsideToClose:!0,controller:t,focusOnOpen:!1,targetEvent:e,templateUrl:"app/setting-item/optSnap/optSnap-dialog.html"}).then(function(e){e.group="optSnap",i.post("/api/setting/optSnap",e).then(function(e){c()})})}function s(){for(var e=[],t=0,n=u.selected.length;t<n;t++)e.push(i.delete("/api/setting/optSnap/"+u.selected[t]._id));a.all(e).then(function(e){c(),u.selected=[]})}function l(){o.show({clickOutsideToClose:!0,controller:n,focusOnOpen:!1,targetEvent:event,locals:{params:u.selected[0]},templateUrl:"app/setting-item/optSnap/optSnap-dialog.html"}).then(function(e){i.put("/api/setting/optSnap/"+e._id,e).then(function(e){u.selected=[]})})}var u=this;u.selected=[],u.addItem=r,u.removeItem=s,u.editItem=l,u.optSnap=[],c()}function t(e,t){e.data={},e.cancel=function(){t.cancel()},e.addItem=function(){4!==Object.keys(e.data).length?alert("내용을 전부 채워주세요"):t.hide(e.data)}}function n(e,t,n){e.data=n,e.cancel=function(){t.cancel()},e.addItem=function(){t.hide(e.data)}}e.$inject=["$scope","$mdDialog","$http","$q"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","params"],angular.module("optSnap",["md.data.table"]).component("optSnap",{templateUrl:"app/setting-item/optSnap/optSnap.template.html",controller:e})}();